# 数据可视化与机器学习预测分析工具

## 项目说明

这是一个基于Streamlit的数据可视化和机器学习预测分析工具。该工具采用模块化设计，包含数据可视化、特征工程、模型预测和模型评估四个标签页。

## 功能特点

- **数据可视化**：支持折线图、箱线图、直方图和相关性热力图等多种可视化方式
- **特征工程**：提供缺失值处理、异常值检测与处理、特征选择等功能
- **模型预测**：支持多种机器学习算法，包括线性回归、决策树、随机森林、支持向量机等
- **模型评估**：提供模型性能评估和新数据预测功能

## 代码结构

项目采用了简化的代码结构，将所有功能整合到一个app.py文件中，便于部署和维护。

主要模块：
- 数据加载与预处理
- 数据可视化
- 特征工程
- 模型训练与预测
- 模型评估

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行应用

```bash
streamlit run app.py
```

## 使用方法

1. 在侧边栏选择数据文件夹路径和CSV文件
2. 在"数据可视化"标签页查看数据并生成各种图表
3. 在"特征工程"标签页处理数据并选择特征
4. 在"模型预测"标签页训练和选择模型
5. 在"模型评估"标签页评估模型性能并进行新数据预测

## 支持的模型

### 回归模型
- 线性回归
- 岭回归
- Lasso回归
- 决策树回归
- 随机森林回归
- 支持向量回归
- XGBoost回归（可选）
- LightGBM回归（可选）

### 分类模型
- 逻辑回归
- 决策树分类
- 随机森林分类
- 支持向量分类
- K近邻分类
- 朴素贝叶斯
- XGBoost分类（可选）
- LightGBM分类（可选）

## 代码优化说明

原始代码存在以下问题：
1. 代码分散在多个文件中，增加了维护难度
2. 存在变量作用域问题，特别是`df_clean`变量在被引用前未定义
3. 标签页之间的数据共享不够清晰

优化方案：
1. 将所有功能整合到一个app.py文件中
2. 使用`st.session_state`统一管理状态，解决变量作用域问题
3. 明确各个模块的输入输出，提高代码可读性
4. 添加更多错误处理和用户提示，提升用户体验

## 未来改进

- 添加更多的数据预处理选项
- 支持更多的可视化图表类型
- 添加超参数调优功能
- 支持模型保存和加载
- 添加批量预测功能 

## Docker部署

本项目已经配置了Docker支持，可以通过以下方式部署：

### 使用Docker Compose（推荐）

1. 确保您的系统已安装Docker和Docker Compose
2. 在项目根目录下运行：
   ```bash
   docker-compose up -d
   ```
3. 访问 http://localhost:8501 即可使用应用

### 手动构建Docker镜像

1. 构建Docker镜像：
   ```bash
   docker build -t streamlit-ml-app .
   ```
2. 运行Docker容器：
   ```bash
   docker run -p 8501:8501 streamlit-ml-app
   ```
3. 访问 http://localhost:8501 即可使用应用

### 停止应用

如果使用Docker Compose启动：
```bash
docker-compose down
```

如果手动启动容器：
```bash
docker stop <container_id>
```

## 开发环境

如果您想在本地开发环境中运行：

1. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
2. 运行应用：
   ```bash
   streamlit run app.py
   ``` 